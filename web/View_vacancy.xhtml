<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="VacancyViewDlg" widgetVar="VacancyViewDialog" modal="true" resizable="false" appendTo="@(body)" header="#{bundle.ViewVacancyTitle}">
            <h:form id="VacancyViewForm">
                <h:panelGroup id="display">
                    <p:panelGrid columns="2" rendered="#{vacancyController.selected != null}">
                        <h:outputText value="#{bundle.ViewVacancyLabel_id}"/>
                        <h:outputText value="#{vacancyController.selected.id}" title="#{bundle.ViewVacancyTitle_id}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_position}"/>
                        <h:outputText value="#{vacancyController.selected.position}" title="#{bundle.ViewVacancyTitle_position}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_requirments}"/>
                        <h:outputText value="#{vacancyController.selected.requirments}" title="#{bundle.ViewVacancyTitle_requirments}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_salary}"/>
                        <h:outputText value="#{vacancyController.selected.salary}" title="#{bundle.ViewVacancyTitle_salary}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_status}"/>
                        <h:outputText value="#{vacancyController.getStatus(vacancyController.selected.status)}" title="#{bundle.ViewVacancyTitle_status}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_closeDate}"/>
                        <h:outputText value="#{vacancyController.selected.closeDate}" title="#{bundle.ViewVacancyTitle_closeDate}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_applicantId}"/>
                        <h:outputText value="#{vacancyController.selected.applicantId}" title="#{bundle.ViewVacancyTitle_applicantId}"/>
                        <h:outputText value="#{bundle.ViewVacancyLabel_employerId}"/>
                        <h:outputText value="#{vacancyController.selected.employerId}" title="#{bundle.ViewVacancyTitle_employerId}"/>
                        <h:outputText value="CompanyName"/>
                        <h:outputText value="#{vacancyController.selected.employerId.companyName}" title="Company Name"/>
                        <h:outputText value="Email"/>
                        <h:outputText value="#{vacancyController.selected.employerId.personId.email}" title="Email"/>
                    </p:panelGrid>
                    
                        <br/>
                        <h:panelGroup id="marks_employer" rendered="#{not empty loginController.loginPerson.manager}">
                            <h3>Feedback</h3>
                            <p:panelGrid columns="2">
                                <h:outputText value="Company Name:"/>
                                <h:outputText value="#{vacancyController.selected.employerId.companyName}" />
                                <h:outputText value="Average mark:"/>
                                <h:outputText value="#{vacancyController.avgMark}" />
                            </p:panelGrid>
                            <p:dataTable id="MarkListTable_vacancy" value="#{vacancyController.marks}" var="item" 
                                 selectionMode="single" selection="#{vacancyController.selected_mark}"
                                 paginator="true"
                                 rowKey="#{item.id}"
                                 rows="10"
                                 rowsPerPageTemplate="10,20,30,40,50"
                                 style="width:300px;"
                                 >
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListMarkTitle_mark}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.mark}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListMarkTitle_comment}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.comment}"/>
                                </p:column>
                            </p:dataTable>  
                        </h:panelGroup>
                        <br/>
                        
                    <p:commandButton value="#{bundle.Close}" onclick="VacancyViewDialog.hide()"/>
                </h:panelGroup>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
