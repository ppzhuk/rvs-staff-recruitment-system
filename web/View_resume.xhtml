<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="ResumeViewDlg" widgetVar="ResumeViewDialog" modal="true" resizable="false" appendTo="@(body)" header="#{bundle.ViewResumeTitle}">
            <h:form id="ResumeViewForm">
                <h:panelGroup id="display">
                    <p:panelGrid columns="2" rendered="#{resumeController.selected != null}">
                        <h:outputText value="#{bundle.ViewResumeLabel_applicantId}"/>
                        <h:outputText value="#{resumeController.selected.applicantId}" title="#{bundle.ViewResumeTitle_applicantId}"/>
                        <h:outputText value="Name"/>
                        <h:outputText value="#{resumeController.selected.applicantId.personId.name}" title="Applicant Name"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_id}"/>
                        <h:outputText value="#{resumeController.selected.id}" title="#{bundle.ViewResumeTitle_id}"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_experience}"/>
                        <h:outputText value="#{resumeController.selected.experience}" title="#{bundle.ViewResumeTitle_experience}"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_skills}"/>
                        <h:outputText value="#{resumeController.selected.skills}" title="#{bundle.ViewResumeTitle_skills}"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_education}"/>
                        <h:outputText value="#{resumeController.selected.education}" title="#{bundle.ViewResumeTitle_education}"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_description}"/>
                        <h:outputText value="#{resumeController.selected.description}" title="#{bundle.ViewResumeTitle_description}"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_inSearch}"/>
                        <p:selectBooleanCheckbox value="#{resumeController.selected.inSearch}" disabled="true"/>
                        <h:outputText value="#{bundle.ViewResumeLabel_vacancyId}"/>
                        <h:outputText value="#{resumeController.selected.vacancyId.id}" title="#{bundle.ViewResumeTitle_vacancyId}"/>
                        <h:outputText value="Email"/>
                        <h:outputText value="#{resumeController.selected.applicantId.personId.email}" title="Email"/>
                    </p:panelGrid>
                    
                    <br/>
                    <h:panelGroup id="marks_aplcnt" rendered="#{not empty loginController.loginPerson.manager}">
                            <h3>Feedback</h3>
                            <p:panelGrid columns="2">
                                <h:outputText value="Applicant name:"/>
                                <h:outputText value="#{resumeController.selected.applicantId.personId.name}" />
                                <h:outputText value="Average mark:"/>
                                <h:outputText value="#{resumeController.avgMark}" />
                            </p:panelGrid>
                            <p:dataTable id="MarkListTable_resume" value="#{resumeController.marks}" var="item" 
                                 selectionMode="single" selection="#{resumeController.selected_mark}"
                                 paginator="true"
                                 rowKey="#{item.id}"
                                 rows="10"
                                 rowsPerPageTemplate="10,20,30,40,50"
                                 style="width:300px;"
                                 >
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListMarkTitle_mark}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.mark}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListMarkTitle_comment}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.comment}"/>
                                </p:column>
                            </p:dataTable>  
                        </h:panelGroup>
                        <br/>
                    
                    <p:commandButton value="#{bundle.Close}" onclick="ResumeViewDialog.hide()"/>
                </h:panelGroup>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
